<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå...</title>
<style>
:root {
  --bg1:#0b0b0b; --bg2:#1a1a1a; --acc:#00e6ac; --soft:#ffffff22; --text:#f5f5f5; --sub:#bdbdbd;
}
body.light {
  --bg1:#fafafa; --bg2:#f0f0f0; --acc:#007aff; --soft:#00000022; --text:#1a1a1a; --sub:#555;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2)); color:var(--text);display:flex;justify-content:center;align-items:center;height:100vh;transition:.3s;}
.card{width:min(520px,92vw);background:rgba(20,20,20,0.8);backdrop-filter:blur(14px); padding:36px 28px;border-radius:24px;border:1px solid #2a2a2a;text-align:center;box-shadow:0 15px 40px rgba(0,0,0,0.6);}
body.light .card{background:rgba(255,255,255,0.8);border:1px solid #ddd;}
.ring{width:120px;height:120px;margin:0 auto 18px;border:12px solid var(--soft);border-top-color:var(--acc); border-radius:50%;animation:spin .9s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}
h1{font-size:24px;font-weight:600;margin:6px 0;}
p{font-size:15px;color:var(--sub);}
.bar{margin:20px auto 14px;width:100%;height:10px;border-radius:999px;background:#2a2a2a;overflow:hidden;}
.bar>i{display:block;height:100%;width:30%;background:linear-gradient(90deg,#ffffff33,var(--acc)); border-radius:999px;animation:progress 1.8s ease-in-out infinite;}
@keyframes progress{0%{margin-left:-30%}50%{margin-left:50%}100%{margin-left:120%}}
.list{text-align:left;margin-top:12px;font-size:14px;color:#cfcfcf;padding:0 4px;max-height:120px;overflow-y:auto;}
body.light .list{color:#333;}
.actions{display:flex;gap:12px;justify-content:center;margin-top:18px;}
.btn{appearance:none;border:1px solid #333;color:#fff;background:#202020; padding:11px 18px;border-radius:12px;cursor:pointer;transition:.2s;font-size:14px;}
.btn:hover{transform:translateY(-1px);border-color:#444;background:#2a2a2a;}
.btn:active{transform:scale(0.96);}
body.light .btn{background:#f8f8f8;color:#111;border:1px solid #ccc;}
.muted{color:#a8a8a8;font-size:12px;margin-top:10px;}
.theme-toggle{position:absolute;top:20px;right:20px;padding:8px 14px;border:none;border-radius:8px; cursor:pointer;background:var(--acc);color:#fff;font-weight:bold;transition:.3s;}
body.light .theme-toggle{background:#333;color:#fff;}
</style>
</head>
<body>
<button class="theme-toggle" id="themeBtn">üåô Dark</button>
<div class="card">
  <div class="ring"></div>
  <h1 id="title">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‚Ä¶</h1>
  <p id="subtitle">‡∏ñ‡πâ‡∏≤‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏£‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</p>
  <div class="bar"><i></i></div>
  <div class="list" id="status"></div>
  <div class="actions">
    <button class="btn" id="skip">‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
    <button class="btn" id="retry" style="display:none;">‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
  </div>
  <div class="muted">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
</div>

<audio id="beep" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>

<script>
const TIMEOUT_MS=5000;
const statusEl=document.getElementById('status');
const btnSkip=document.getElementById('skip');
const btnRetry=document.getElementById('retry');
const beep=document.getElementById('beep');
const titleEl=document.getElementById('title');
const subtitleEl=document.getElementById('subtitle');
let leftPage=false;
let countdownTimer;
let URLS=[];

window.addEventListener('pagehide',()=>leftPage=true,{once:true});
document.addEventListener('visibilitychange',()=>{if(document.visibilityState==='hidden')leftPage=true;});

function log(msg){
  const line=document.createElement('div');
  line.innerHTML=msg;
  statusEl.appendChild(line);
  statusEl.scrollTop=statusEl.scrollHeight;
}

function playBeep(){ beep.currentTime=0; beep.play().catch(()=>{}); }

// ‡πÇ‡∏´‡∏•‡∏î URL ‡∏à‡∏≤‡∏Å links.json
fetch('links.json')
  .then(res=>res.json())
  .then(data=>{
    URLS=data.urls;
    tryLink(0);
  })
  .catch(()=>log('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î links.json ‡πÑ‡∏î‡πâ'));

function tryLink(i){
  if(i>=URLS.length){
    log('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
    titleEl.textContent='‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à';
    subtitleEl.textContent='‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
    btnRetry.style.display='inline-block';
    btnSkip.style.display='none';
    return;
  }
  const url=URLS[i];
  log(`‚è≥ ‡∏•‡∏¥‡∏á‡∏Å‡πå ${i+1}... <a href="${url}" target="_blank">(‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏≠‡∏á)</a>`);
  playBeep();

  let secs=TIMEOUT_MS/1000;
  titleEl.textContent=`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‚Ä¶ (${secs}s)`;
  clearInterval(countdownTimer);
  countdownTimer=setInterval(()=>{
    secs--; if(secs>=0) titleEl.textContent=`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‚Ä¶ (${secs}s)`;
  },1000);

  const timer=setTimeout(()=>{
    clearInterval(countdownTimer);
    if(!leftPage){ log(`‚ö†Ô∏è ‡∏•‡∏¥‡∏á‡∏Å‡πå ${i+1} ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á ‚Üí ‡∏Ç‡πâ‡∏≤‡∏°`); tryLink(i+1); }
  },TIMEOUT_MS);

  // ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à 1s ‡∏Å‡πà‡∏≠‡∏ô redirect
  setTimeout(()=>{
    clearTimeout(timer);
    clearInterval(countdownTimer);
    if(!leftPage){
      titleEl.textContent='‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ';
      subtitleEl.textContent='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå...';
      log('‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à, ‡∏Å‡∏≥‡∏•‡∏±‡∏á redirect...');
      setTimeout(()=>{ window.location.assign(url); },1000);
    }
  }, 1000); // delay 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
}

btnSkip.onclick=()=>{
  leftPage=false;
  tryLink(URLS.indexOf(window.location.href)+1 || 0);
};

btnRetry.onclick=()=>{
  statusEl.innerHTML=''; leftPage=false;
  btnRetry.style.display='none'; btnSkip.style.display='inline-block';
  tryLink(0);
};

// Dark/Light toggle
const themeBtn=document.getElementById('themeBtn');
themeBtn.addEventListener('click',()=>{
  document.body.classList.toggle('light');
  themeBtn.textContent=document.body.classList.contains('light')?'üåû Light':'üåô Dark';
});
</script>
</body>
</html>
